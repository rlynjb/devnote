#!/bin/sh

tmux has-session -t devfun
if [ $? != 0 ]
then
  tmux new-session   -s devfun -d

  # home window
  # split default window into 2
  tmux split-window  -t devfun:0 -h
  # on left pane, open to applications directory
  tmux send-keys     -t devfun:0.0 "cd /Applications" C-m
  # on left pane, list all applications
  tmux send-keys     -t devfun:0.0 "ls" C-m
  # when devfun tmux session is attached, select left pane
  tmux select-pane   -t devfun:0.0
  # on right pane, open to home directory
  tmux send-keys     -t devfun:0.1 "cd" C-m

  # set up dev environment
  # create new window
  tmux new-window    -t devfun:1
  # split new window and make left pane width smaller
  tmux split-window  -t devfun:1 -h -p 65
  # on left pane, split pane vertically
  tmux split-window  -t devfun:1.0 -v
  # on left pane, set top pane to projects directory
  tmux send-keys     -t devfun:1.0 "cd ~/projects" C-m
  # on left pane, set bottom pane to project directory
  tmux send-keys     -t devfun:1.2 "cd ~/projects" C-m
  # on right pane, open to projects directory
  tmux send-keys     -t devfun:1.1 "cd ~/projects" C-m
  # on right pane, open vim
  tmux send-keys     -t devfun:1.1 "vim" C-m
  # when we go to this new window, select 1st pane
  tmux select-pane   -t devfun:1.0
  
  #set window to first when session is open
  tmux select-window -t devfun:0
fi
tmux attach -t devfun
